<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Okta Success</title>
    <script src="https://global.oktacdn.com/okta-auth-js/5.2.2/okta-auth-js.min.js"></script>
</head>
<body>
    <script>
        // Get the client ID from the URL query parameters
        const clientId = new URLSearchParams(window.location.search).get('client_id');
        console.log('Client ID:', clientId);

        // Define the redirection map based on client IDs
        const redirectMap = {
            '0oafh5hg3uSvAvdNe1d7': 'https://www.ford.com/',
            '0oagpx3dhqpSBY8qO1d7': 'https://www.lincoln.com/'
        };

        // Initialize Okta Auth SDK
        const authClient = new OktaAuth({
            issuer: 'https://dev-duuo.oktapreview.com/oauth2/default',
            clientId: clientId,
            redirectUri: window.location.href
        });

        // Handle the redirect and exchange the code for tokens
        authClient.token.parseFromUrl().then(function(res) {
            if (res.tokens && res.tokens.accessToken) {
                console.log('Access Token:', res.tokens.accessToken);
                
                // Redirect based on the client ID
                const destinationUrl = redirectMap[clientId] || 'https://papakobina.github.io/testingsub/succes.html';
                console.log('Redirecting to:', destinationUrl);
                window.location.href = destinationUrl;
            } else {
                console.error('No access token received');
            }
        }).catch(function(err) {
            console.error('Error parsing tokens from URL:', err);
        });
    </script>
</body>
</html>
